<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
    //  make button
    const but = document.createElement('button');
    const rbut = document.createElement('button');
    const redbut = document.createElement('button');
    const erasebut = document.createElement('button');
    const body = document.querySelector('body');
    const header = document.createElement('header');
    but.textContent = 'Set grid scale';
    redbut.textContent = 'red';
    rbut.textContent = 'random';
    erasebut.textContent = 'erase';
    body.style.textAlign = 'center';
    but.style.padding = '10px';
    but.style.margin = '20px auto';
    but.style.fontSize = '150%';
    but.style.display = 'inline-block';
    rbut.style.padding = '10px';
    rbut.style.margin = '20px auto';
    rbut.style.fontSize = '150%';
    rbut.style.display = 'inline-block';
    redbut.style.display = 'inline-block';
    redbut.style.padding = '10px';
    redbut.style.margin = '20px auto';
    redbut.style.fontSize = '150%';
    erasebut.style.display = 'inline-block';
    erasebut.style.padding = '10px';
    erasebut.style.margin = '20px auto';
    erasebut.style.fontSize = '150%';
    body.appendChild(header);
    header.appendChild(but);
    header.appendChild(redbut);
    header.appendChild(erasebut);
    header.appendChild(rbut);
    console.log(but);
    let color = 'random';

    redbut.addEventListener('click',() =>{
        color = 'red';
    })
    erasebut.addEventListener('click',() =>{
        color = 'erase';
    })
    rbut.addEventListener('click',() =>{
        color = 'random';
    })


    // make grid-box

    const gridbox = document.createElement('div');
    gridbox.style.cssText = 
        `width: 600px;
        height: 600px; 
        border: 2px solid black; 
        margin:auto;
        display: inline-grid;`
        

    body.appendChild(gridbox);

    // add event on button
    let scale;
    but.addEventListener('click',() =>{
        scale = prompt('input grid scale');
        
        if(scale.match(/^[0-9]+$/) == null){
            console.log('wtf');
        } else {
            updateGrid(scale);
        };
       // updateGrid(scale);
    })

    //make div grid  
    updateGrid(20);  

    function updateGrid(scale){
        let auto = '';
        gridbox.innerHTML = '';
        console.log(scale);
        for(let i = 0; i < scale; i++) {auto += 'auto ';}
        for(let i = 0; i< scale*scale ; i++){
            const cell = document.createElement('div');
            
            // cell.style.border = '0.5px solid white';
            gridbox.style.gridTemplateColumns = auto;
            console.log(auto);
            cell.addEventListener('mouseenter',(e) =>{
                cell.style.backgroundColor = getColor();
            })
            // cell.addEventListener('mouseleave',(e) =>{
            //     cell.style.backgroundColor = 'white';
            // })
            gridbox.appendChild(cell);
        }
        
    }

    function getColor(){
        switch(color){
            case 'red':
            return 'red';
            break;
            case 'erase':
            return 'white';
            break;
            case 'random':
            return 'rgb(' + Math.random()*255 + ',' + Math.random()*255 + ',' + Math.random()*255 + ')';
            break;
        }
       // 
        //return 'red';
    }

    //set hover
    
    
    
    

</script>
</body>
</html>